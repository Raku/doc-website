# Unless the file starts with a global options block, the first
# uncommented line is always the address of your site.

:80 {
    log {
        output stdout
    }

    root * /usr/share/caddy

  map {path} {npath} {
    import /usr/share/caddy/assets/deprecated-urls
    import /usr/share/caddy/assets/prettyurls
  }

    route {
        error /hashed* 404
        try_files {npath}.html {path}.html {path}
    }

    uri /type/* replace :: /

    # Enable the static file server.
    file_server

    handle_errors {
        @404 {
            expression {http.error.status_code} == 404
        }
        rewrite @404 /404.html
        file_server
    }
}

# Refer to the Caddy docs for more information:
# https://caddyserver.com/docs/caddyfile
